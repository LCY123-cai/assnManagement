(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d8893dd"],{4068:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"assnListContainer"},[n("el-form",{staticClass:"demo-form-inline baseFrom",attrs:{inline:!0,model:t.articleForm,"label-width":"100px","label-position":"right"}},[n("el-form-item",{attrs:{label:"社团名称"}},[n("x-input",{attrs:{autocomplete:!0,"fetch-suggestions":t.queryAssnAsync,"value-key":"assnName"},model:{value:t.articleForm.assnName,callback:function(e){t.$set(t.articleForm,"assnName",e)},expression:"articleForm.assnName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"文章标题"}},[n("x-input",{model:{value:t.articleForm.articleTitle,callback:function(e){t.$set(t.articleForm,"articleTitle",e)},expression:"articleForm.articleTitle"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),n("el-button",{attrs:{type:"primary",plain:""},on:{click:t.reset}},[t._v("重置")])],1)],1),t._v(" "),n("div",{staticClass:"btnGroup"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.viewArticle(t.pitchArticle)}}},[t._v("查看文章")]),t._v(" "),n("el-button",{attrs:{type:"primary",disabled:t.systemPermission?!t.systemPermission:!t.assnPermission},on:{click:t.deleteArticle}},[t._v("删除文章")]),t._v(" "),n("el-button",{attrs:{type:"primary",disabled:t.systemPermission?!t.systemPermission:!t.assnPermission},on:{click:t.editArticle}},[t._v("修改文章")])],1),t._v(" "),n("x-table",{ref:"grid",attrs:{config:t.config}}),t._v(" "),n("editArticle",{ref:"editArticle",attrs:{articleInfo:t.pitchArticle}})],1)},r=[],s=(n("ac6a"),n("456d"),n("8256")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-drawer",{attrs:{title:t.title,visible:t.drawer,direction:t.direction,size:"80%"},on:{"update:visible":function(e){t.drawer=e}}},[n("div",{staticClass:"container"},[n("tinymce",{ref:"tinymce",attrs:{height:300,value:t.articleInfo.richText}}),t._v(" "),n("div",{staticClass:"btnGourp"},[n("el-button",{attrs:{type:"primary"},on:{click:t.updateArticle}},[t._v("修改")])],1)],1)])},c=[],o=n("4095"),l={components:{tinymce:s["a"]},props:{articleInfo:{type:Object,required:!0}},data:function(){return{drawer:!1,direction:"btt"}},computed:{title:function(){return"修改文章"+"（".concat(this.articleInfo.articleTitle,"-").concat(this.articleInfo.assnName,"）")}},methods:{open:function(){this.drawer=!0},updateArticle:function(){var t=this,e=this.$refs.tinymce.getContent(),n={id:this.articleInfo.id,richText:e};Object(o["e"])(n).then((function(e){t.drawer=!1,t.$message.success("更新文章成功"),t.$parent.$refs.grid.queryData(!0)}))}}},u=l,d=(n("8b41"),n("2877")),f=Object(d["a"])(u,a,c,!1,null,"c87b2754",null),h=f.exports,m=n("b618"),p={components:{tinymce:s["a"],editArticle:h},data:function(){var t=this;return{articleForm:{},systemPermission:!1,assnPermission:!1,pitchArticle:{},config:{url:"/article/list",params:{},attrs:{"highlight-current-row":!0},events:{"current-change":function(e){t.pitchArticle=e||{},t.assnPermission=-1!==t.$store.state.user.assnIds.indexOf(t.pitchArticle.assnId)}},pagination:{"page-size":10,"page-size-opts":[10,20,30,40]},columns:[{label:"序号",type:"index",width:70},{label:"文章标题",prop:"articleTitle"},{label:"社团名称",prop:"assnName"},{label:"文章创建人",prop:"userName"},{label:"文章点击量",prop:"clicks"},{label:"创建时间",prop:"gmtCreate",format:"time"}]}}},computed:{},methods:{search:function(){this.config.params=Object.assign({},this.articleForm),this.$refs.grid.queryData(!0)},reset:function(){this.articleForm={},this.config.params=this.articleForm,this.$refs.grid.queryData(!0)},deleteArticle:function(){var t=this;Object.keys(this.pitchArticle).length>0?this.$confirm('你确定要删除&nbsp;<strong style="color: #F56C6C;">'.concat(this.pitchArticle.articleTitle,"</strong>&nbsp;这个文章吗？"),"删除文章",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",closeOnClickModal:!1,dangerouslyUseHTMLString:!0}).then((function(){var e={id:t.pitchArticle.id,deleted:1};Object(o["c"])(e).then((function(e){t.$message.success("删除文章成功"),t.$refs.grid.queryData(!0)}))})).catch((function(){})):this.$message({message:"请至少选择一条数据",type:"warning"})},editArticle:function(){Object.keys(this.pitchArticle).length>0?this.$refs.editArticle.open():this.$message({message:"请至少选择一条数据",type:"warning"})},viewArticle:function(t){this.$router.push({name:"文章展示",params:t})},queryAssnAsync:function(t,e){t?Object(m["c"])().then((function(n){var i=n.data,r=i.filter((function(e,n,i){return-1!==e.assnName.toLowerCase().indexOf(t.toLowerCase())}));e(r)})):e([])}},created:function(){this.systemPermission=-1!==this.$store.state.user.roles.indexOf("admin"),this.assnPermission=-1!==this.$store.state.user.assnIds.indexOf(this.pitchArticle.assnId)}},b=p,y=(n("ff38"),Object(d["a"])(b,i,r,!1,null,"56615d58",null));e["default"]=y.exports},4095:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return o}));var i=n("b775");function r(t){return Object(i["a"])({url:"/article/issue",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/article/clicks",method:"post",data:t})}function a(t){return Object(i["a"])({url:"/article/delete",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/article/update",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/article/list",method:"get",params:t})}},"456d":function(t,e,n){var i=n("4bf8"),r=n("0d58");n("5eda")("keys",(function(){return function(t){return r(i(t))}}))},"5eda":function(t,e,n){var i=n("5ca1"),r=n("8378"),s=n("79e5");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*s((function(){n(1)})),"Object",a)}},"616f":function(t,e,n){},"7e10":function(t,e,n){"use strict";var i=n("92db"),r=n.n(i);r.a},8256:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},r=[],s=(n("ac6a"),n("c5f6"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传")]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:t.imgUrl,"list-type":"picture-card",name:"avatar"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确认")])],1)],1)}),a=[],c=(n("456d"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],imgUrl:"/prod-api/article/image"}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message.warning("请等待所有的图片上传完成。 如果网络有问题，请你刷新页面或者检查网络！")},handleSuccess:function(t,e){for(var n=e.uid,i=Object.keys(this.listObj),r=0,s=i.length;r<s;r++)if(this.listObj[i[r]].uid===n)return this.listObj[i[r]].url=this.$imgUrl+t.data.fileName,void(this.listObj[i[r]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,n=Object.keys(this.listObj),i=0,r=n.length;i<r;i++)if(this.listObj[n[i]].uid===e)return void delete this.listObj[n[i]]},beforeUpload:function(t){var e=this,n=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise((function(r,s){var a=new Image;a.src=n.createObjectURL(t),a.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},r(!0)}))}}}),o=c,l=(n("7e10"),n("2877")),u=Object(l["a"])(o,s,a,!1,null,"afd5e304",null),d=u.exports,f=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],h=f,m=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],p=m,b=(n("ac4d"),n("8a81"),[]);function y(){return window.tinymce}var g=function(t,e){var n=document.getElementById(t),i=e||function(){};if(!n){var r=document.createElement("script");r.src=t,r.id=t,document.body.appendChild(r),b.push(i);var s="onload"in r?a:c;s(r)}function a(e){e.onload=function(){this.onerror=this.onload=null;var t=!0,n=!1,i=void 0;try{for(var r,s=b[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var a=r.value;a(null,e)}}catch(c){n=!0,i=c}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}b=null},e.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+t),e)}}function c(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e=!0,n=!1,i=void 0;try{for(var r,s=b[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var a=r.value;a(null,t)}}catch(c){n=!0,i=c}finally{try{e||null==s.return||s.return()}finally{if(n)throw i}}b=null}}}n&&i&&(y()?i(null,n):b.push(i))},v=g,w="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",_={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;v(w,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:p,menubar:this.menubar,plugins:h,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){e.value&&n.setContent(e.value),e.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",n.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},images_upload_handler:function(t,e,n,i){e(t.uri())}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){return window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},j=_,O=(n("fb64"),Object(l["a"])(j,i,r,!1,null,"d484e72c",null));e["a"]=O.exports},"8b41":function(t,e,n){"use strict";var i=n("975d"),r=n.n(i);r.a},"92db":function(t,e,n){},"975d":function(t,e,n){},"976f":function(t,e,n){},b618:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"j",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"h",(function(){return o})),n.d(e,"g",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"k",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"i",(function(){return h})),n.d(e,"f",(function(){return m}));var i=n("b775");function r(t){return Object(i["a"])({url:"/assn/list",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/assn/nameList",method:"get",params:t})}function a(){return Object(i["a"])({url:"/assn/handleAssn",method:"get"})}function c(t){return Object(i["a"])({url:"/assn/create",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/assn/edit",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/assn/disband",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/assn/changeHiring",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/assn/typeList",method:"get"})}function f(t){return Object(i["a"])({url:"/assn/addType",method:"post",data:t})}function h(t){return Object(i["a"])({url:"/assn/editType",method:"post",data:t})}function m(t){return Object(i["a"])({url:"/assn/deleteType",method:"post",data:t})}},fb64:function(t,e,n){"use strict";var i=n("616f"),r=n.n(i);r.a},ff38:function(t,e,n){"use strict";var i=n("976f"),r=n.n(i);r.a}}]);